let $stage,$controls,activeIndex=0,limit=0,disabled=!1,canvas=!1;const SPIN_FORWARD_CLASS="js-spin-fwd",SPIN_BACKWARD_CLASS="js-spin-bwd",DISABLE_TRANSITIONS_CLASS="js-transitions-disabled",SPIN_DUR=1e3,appendControls=()=>{$controls=$(".tabs3d-control").children(),$controls.eq(activeIndex).addClass("active")},setIndexes=()=>{$(".spinner").children().each(((a,e)=>{0==a&&$(e).addClass("js-active"),$(e).attr("data-index",a),$(".tabs3d-control").append('<a style="background-color: '+$(e).attr("data-bg")+'" href="#tab" data-index="'+a+'">'+$(e).attr("data-menu")+"</a>"),limit++}))},duplicateSpinner=()=>{const a=$(".spinner").parent(),e=$(".spinner").parent().html();a.append(e),$(".spinner").last().addClass("spinner-right"),$(".spinner-right").removeClass("spinner-left")},paintFaces=()=>{$(".spinner-face").each(((a,e)=>{$(e).children().css("background",$(e).attr("data-bg"))}))},prepareDom=()=>{$(".spinner").children().each(((a,e)=>{0==a&&$(e).addClass("js-active"),$(e).attr("data-index",a),$(".tabs3d-control").append('<a style="background-color: '+$(e).attr("data-bg")+'" href="#tab" data-index="'+a+'">'+$(e).attr("data-menu")+"</a>"),limit++})),$(".spinner-face").each(((a,e)=>{$(e).children().css("background",$(e).attr("data-bg"))})),duplicateSpinner(),$controls=$(".tabs3d-control").children(),$controls.eq(activeIndex).addClass("active")},spin=(a=1)=>{if(disabled)return;if(!a)return;activeIndex+=a,disabled=!0,activeIndex>=limit&&(activeIndex=0),activeIndex<0&&(activeIndex=limit-1);$(".spinner-face.js-active");$(".spinner-face[data-index="+activeIndex+"]").addClass("js-next"),a>0?$stage.addClass("js-spin-fwd"):$stage.addClass("js-spin-bwd"),$controls.removeClass("active"),$controls.eq(activeIndex).addClass("active"),setTimeout((()=>{spinCallback(a)}),1e3,a)},spinCallback=a=>{$(".js-active").removeClass("js-active"),$(".js-next").removeClass("js-next").addClass("js-active"),$stage.addClass("js-transitions-disabled").removeClass("js-spin-fwd").removeClass("js-spin-bwd"),$(".js-active").each(((a,e)=>{const t=$(e);t.prependTo(t.parent())})),setTimeout((()=>{$stage.removeClass("js-transitions-disabled"),disabled=!1}),100)},attachListeners=()=>{document.onkeyup=a=>{switch(a.keyCode){case 38:spin(-1);break;case 40:spin(1)}},$controls.on("click",(a=>{if(a.preventDefault(),disabled)return;const e=$(a.target),t=parseInt(e.attr("data-index"),10);spin(t-activeIndex)}))},assignEls=()=>{$stage=$(".tabs3d-stage")},init=()=>{$stage=$(".tabs3d-stage"),$(".spinner").children().each(((a,e)=>{0==a&&$(e).addClass("js-active"),$(e).attr("data-index",a),$(".tabs3d-control").append('<a style="background-color: '+$(e).attr("data-bg")+'" href="#tab" data-index="'+a+'">'+$(e).attr("data-menu")+"</a>"),limit++})),$(".spinner-face").each(((a,e)=>{$(e).children().css("background",$(e).attr("data-bg"))})),duplicateSpinner(),$controls=$(".tabs3d-control").children(),$controls.eq(activeIndex).addClass("active"),document.onkeyup=a=>{switch(a.keyCode){case 38:spin(-1);break;case 40:spin(1)}},$controls.on("click",(a=>{if(a.preventDefault(),disabled)return;const e=$(a.target),t=parseInt(e.attr("data-index"),10);spin(t-activeIndex)}))};$((()=>{$stage=$(".tabs3d-stage"),$(".spinner").children().each(((a,e)=>{0==a&&$(e).addClass("js-active"),$(e).attr("data-index",a),$(".tabs3d-control").append('<a style="background-color: '+$(e).attr("data-bg")+'" href="#tab" data-index="'+a+'">'+$(e).attr("data-menu")+"</a>"),limit++})),$(".spinner-face").each(((a,e)=>{$(e).children().css("background",$(e).attr("data-bg"))})),duplicateSpinner(),$controls=$(".tabs3d-control").children(),$controls.eq(activeIndex).addClass("active"),document.onkeyup=a=>{switch(a.keyCode){case 38:spin(-1);break;case 40:spin(1)}},$controls.on("click",(a=>{if(a.preventDefault(),disabled)return;const e=$(a.target),t=parseInt(e.attr("data-index"),10);spin(t-activeIndex)}))}));